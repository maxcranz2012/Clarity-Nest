<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mouse</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #000;
            font-family: Arial, sans-serif;
            color: #fff;
        }

        .intro-screen, .game-screen, .end-screen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            width: 100%;
            height: 100%;
        }

        .story-text {
            font-size: 24px;
            margin: 20px;
            opacity: 0;
            animation: fadeIn 2s forwards;
        }

        .hidden {
            display: none;
        }

        .top-bar {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
        }

        .click-icon {
            margin-right: 10px;
        }

        .click-count {
            font-size: 24px;
            font-weight: bold;
        }

        .main-mouse {
            width: 200px;
            margin: 20px;
            cursor: pointer;
        }

        .buttons {
            display: flex;
            gap: 20px;
        }

        button {
            padding: 10px 20px;
            margin-top: 20px;
            background-color: #007BFF;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }

        button:hover {
            background-color: #0056b3;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body>
    <div id="introScreen" class="intro-screen hidden">
        <div id="storyText" class="story-text"></div>
    </div>
    <div id="gameScreen" class="game-screen hidden">
        <div class="top-bar">
            <span id="clickCount" class="click-count">0</span> / 10000
        </div>
        <img id="mouseImage" src="/ru/games/" alt="Мышонок" class="main-mouse" onclick="incrementClicks()">
        <div class="buttons">
            <button onclick="showStory()">Watch the story</button>
        </div>
    </div>
    <div id="endScreen" class="end-screen hidden">
        <div id="endText">Mouse is</div>
        <button onclick="restartGame()">Free Mode</button>
    </div>
    <script>
        let clickCount = 0;
        const storyTexts = [
        "A man caged a mouse.",
        "The lord of the animals saw this and told the poacher to set him free.",
            "The poacher was frightened and set to work, but the cage was so strong he couldn't break it.",
            "Now he has to hit it 10,000 times to break it, and if he doesn't, it will be very bad...",
        ];
        let currentStoryIndex = 0;
        let gameStarted = localStorage.getItem('gameStarted') === 'true';
        let storyCompleted = localStorage.getItem('storyCompleted') === 'true';

        document.addEventListener("DOMContentLoaded", () => {
            if (!gameStarted || !storyCompleted) {
                document.getElementById("introScreen").classList.remove("hidden");
                showNextStory();
            } else {
                document.getElementById("gameScreen").classList.remove("hidden");
                clickCount = parseInt(localStorage.getItem('clickCount')) || 0;
                document.getElementById("clickCount").textContent = clickCount;
            }
        });

        document.addEventListener("click", () => {
            if (!storyCompleted) {
                showNextStory();
            }
        });

        function showNextStory() {
            if (currentStoryIndex < storyTexts.length) {
                const storyTextElement = document.getElementById("storyText");
                storyTextElement.textContent = storyTexts[currentStoryIndex];
                currentStoryIndex++;
            } else {
                storyCompleted = true;
                localStorage.setItem('storyCompleted', 'true');
                startGame();
            }
        }

        function startGame() {
            document.getElementById("introScreen").classList.add("hidden");
            document.getElementById("gameScreen").classList.remove("hidden");
            localStorage.setItem('gameStarted', 'true');
        }

        function incrementClicks() {
            clickCount++;
            document.getElementById("clickCount").textContent = clickCount;
            localStorage.setItem('clickCount', clickCount);

            if (clickCount >= 10000) {
                endGame();
            }
        }

        function endGame() {
            document.getElementById("gameScreen").classList.add("hidden");
            document.getElementById("endScreen").classList.remove("hidden");
        }

        function restartGame() {
            clickCount = 0;
            localStorage.setItem('clickCount', clickCount);
            document.getElementById("clickCount").textContent = clickCount;
            document.getElementById("endScreen").classList.add("hidden");
            document.getElementById("gameScreen").classList.remove("hidden");
        }

        function resetGame() {
            localStorage.removeItem('gameStarted');
            localStorage.removeItem('clickCount');
            localStorage.removeItem('storyCompleted');
            document.getElementById("gameScreen").classList.add("hidden");
            currentStoryIndex = 0;
            storyCompleted = false;
            showNextStory();
        }

        function showStory() {
            document.getElementById("gameScreen").classList.add("hidden");
            currentStoryIndex = 0;
            storyCompleted = false;
            document.getElementById("introScreen").classList.remove("hidden");
            showNextStory();
        }
    </script>
</body>
</html>
